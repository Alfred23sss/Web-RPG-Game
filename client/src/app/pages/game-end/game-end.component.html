<div class="player-stats">
    <div class="top-row">
        <div class="global-stats">
            <h2>Statistiques globales</h2>
            <ul>
                <li><strong>Dur√©e :</strong> {{ gameStats.globalStats.formattedDuration || 'N/A' }}</li>
                <li><strong>Total de tours :</strong> {{ gameStats.globalStats.totalTurns }}</li>
                <li><strong>% Record de tuiles visit√©es :</strong> {{ gameStats.globalStats.tilesVisitedPercentage }}%</li>
                <li><strong>% Portes manipul√©es :</strong> {{ gameStats.globalStats.doorsManipulatedPercentage }}%</li>
                <li><strong>Nombre de porteurs du drapeau :</strong> {{ gameStats.globalStats.uniqueFlagHolders || 0 }}</li>
            </ul>
        </div>
        <div class="chat-wrapper">
            <app-chat></app-chat>
        </div>
    </div>
    <h2>Statistiques des joueurs</h2>
    <div class="legend">
        <p>
            <strong>L√©gende:</strong> . La fl√®che vers le haut (‚Üë) indique un ordre ascendant, et la fl√®che vers le bas (‚Üì) indique un ordre
            descendant.
        </p>
    </div>
    <table>
        <thead>
            <tr>
                <th (click)="sortBy('playerName')">
                    Nom
                    <span *ngIf="sortKey === 'playerName'">
                        <span *ngIf="sortAsc">&#8593;</span>
                        <span *ngIf="!sortAsc">&#8595;</span>
                    </span>
                    <span *ngIf="sortKey !== 'playerName'">&#8597;</span>
                </th>
                <th (click)="sortBy('combats')">
                    Combats
                    <span *ngIf="sortKey === 'combats'">
                        <span *ngIf="sortAsc">&#8593;</span>
                        <span *ngIf="!sortAsc">&#8595;</span>
                    </span>
                    <span *ngIf="sortKey !== 'combats'">&#8597;</span>
                </th>
                <th (click)="sortBy('escapes')">
                    √âvasions
                    <span *ngIf="sortKey === 'escapes'">
                        <span *ngIf="sortAsc">&#8593;</span>
                        <span *ngIf="!sortAsc">&#8595;</span>
                    </span>
                    <span *ngIf="sortKey !== 'escapes'">&#8597;</span>
                </th>
                <th (click)="sortBy('victories')">
                    Victoires
                    <span *ngIf="sortKey === 'victories'">
                        <span *ngIf="sortAsc">&#8593;</span>
                        <span *ngIf="!sortAsc">&#8595;</span>
                    </span>
                    <span *ngIf="sortKey !== 'victories'">&#8597;</span>
                </th>
                <th (click)="sortBy('defeats')">
                    D√©faites
                    <span *ngIf="sortKey === 'defeats'">
                        <span *ngIf="sortAsc">&#8593;</span>
                        <span *ngIf="!sortAsc">&#8595;</span>
                    </span>
                    <span *ngIf="sortKey !== 'defeats'">&#8597;</span>
                </th>
                <th (click)="sortBy('healthLost')">
                    PV perdus
                    <span *ngIf="sortKey === 'healthLost'">
                        <span *ngIf="sortAsc">&#8593;</span>
                        <span *ngIf="!sortAsc">&#8595;</span>
                    </span>
                    <span *ngIf="sortKey !== 'healthLost'">&#8597;</span>
                </th>
                <th (click)="sortBy('damageCaused')">
                    PV inflig√©s
                    <span *ngIf="sortKey === 'damageCaused'">
                        <span *ngIf="sortAsc">&#8593;</span>
                        <span *ngIf="!sortAsc">&#8595;</span>
                    </span>
                    <span *ngIf="sortKey !== 'damageCaused'">&#8597;</span>
                </th>
                <th (click)="sortBy('uniqueItemsCollected')">
                    Objets ramass√©s
                    <span *ngIf="sortKey === 'uniqueItemsCollected'">
                        <span *ngIf="sortAsc">&#8593;</span>
                        <span *ngIf="!sortAsc">&#8595;</span>
                    </span>
                    <span *ngIf="sortKey !== 'uniqueItemsCollected'">&#8597;</span>
                </th>
                <th (click)="sortBy('tilesVisitedPercentage')">
                    Tuiles visit√©es %
                    <span *ngIf="sortKey === 'tilesVisitedPercentage'">
                        <span *ngIf="sortAsc">&#8593;</span>
                        <span *ngIf="!sortAsc">&#8595;</span>
                    </span>
                    <span *ngIf="sortKey !== 'tilesVisitedPercentage'">&#8597;</span>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let player of sortedStats">
                <td>{{ player.playerName }}</td>
                <td>{{ player.combats }}</td>
                <td>{{ player.escapes }}</td>
                <td>{{ player.victories }}</td>
                <td>{{ player.defeats }}</td>
                <td>{{ player.healthLost }}</td>
                <td>{{ player.damageCaused }}</td>
                <td>{{ objectKeys(player.uniqueItemsCollected).length }}</td>
                <td>{{ player.tilesVisitedPercentage }}%</td>
            </tr>
        </tbody>
    </table>
</div>
<button class="killer-button" (click)="goHome()">üíÄ Quitter la partie</button>
