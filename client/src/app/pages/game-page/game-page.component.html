<div class="game-container">
    <!-- Carte du jeu -->

    <!-- Panneau d'informations -->
    <div class="game-info">
        <div class="game-details">
            <h3>Informations de partie</h3>
            <p>Taille de la carte: {{ game?.size }}</p>
            <p>
                Joueurs actuels: @for(player of lobby.players; track $index){
                <span class="player-name" [class.player-admin]="player.isAdmin" [class.player-regular]="!player.isAdmin">
                    {{ player.name }}
                </span>
                }
            </p>
            <p>Joueur actif: {{ lobby.players.length }}</p>
        </div>

        <div class="inventory">
            <h3>Inventaire</h3>
            <div class="inventory-slot" *ngFor="let slot of [0, 1]">(Vide)</div>
        </div>

        <!-- //fait pour avoir une idee mais on utilise pas le actual player ici mais plutot le premier player du lobby et certains infos sont a changer -->
        <div class="player-info">
            <h3>Informations du joueur</h3>
            <div class="player-header">
                <p class="player-name">{{ lobby.players[0].name }}</p>
                <img [src]="lobby.players[0].avatar" alt="Avatar du joueur" class="player-avatar" />
            </div>
            <div class="player-stats">
                <div class="health-bar">
                    <div class="health-label">Points de vie: {{ lobby.players[0].hp.current }} / {{ lobby.players[0].hp.max }}</div>
                    <div class="health-bar-outer">
                        <div class="health-bar-inner" [style.width.%]="(lobby.players[0].hp.current / lobby.players[0].hp.max) * 100"></div>
                    </div>
                </div>
                <div class="attributes-grid">
                    <div class="attribute">
                        <span class="attribute-label">Rapidité</span>
                        <span class="attribute-value">{{ lobby.players[0].speed }}</span>
                    </div>
                    <div class="attribute">
                        <span class="attribute-label">Attaque</span>
                        <span class="attribute-value">{{ lobby.players[0].attack }}</span>
                    </div>
                    <div class="attribute">
                        <span class="attribute-label">Défense</span>
                        <span class="attribute-value">{{ lobby.players[0].defense }}</span>
                    </div>
                </div>
                <div class="dice-type">
                    <span class="dice-label">Dés assignés:</span>
                    <span class="dice-value">{{ lobby.players[0].attack.bonusDice }}</span>
                </div>
                <div class="resources">
                    <div class="resource">
                        <span class="resource-label">Mouvements restants:</span>
                        <span class="resource-value">{{ lobby.players[0].movementPoints }}</span>
                    </div>
                    <div class="resource">
                        <span class="resource-label">Actions restantes:</span>
                        <span class="resource-value">{{ lobby.players[0] }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 
        
        <div class="player-info">
            <h3>Informations du joueur</h3>
            <p>Nom: {{ player?.name }}</p>
            <img [src]="player?.avatar" alt="Avatar">
            <p>Points de vie: {{ player?.hp }} / {{ player?.maxHp }}</p>
            <p>Attributs: Rapidité {{ player?.speed }}, Attaque {{ player?.attack }}, Défense {{ player?.defense }}</p>
            <p>Dés assignés: {{ player?.diceType }}</p>
            <p>Mouvements restants: {{ player?.remainingMoves }}</p>
            <p>Actions restantes: {{ player?.remainingActions }}</p>
        </div>

        -->
    </div>

    <div class="game-map">
        <app-grid
            [grid]="game?.grid"
            [availablePath]="availablePath"
            [quickestPath]="quickestPath"
            [isEditionMode]="false"
            (tileHovered)="updateQuickestPath($event)"
        ></app-grid>
    </div>

    <!-- Liste des joueurs 
    <div class="player-list">
        <h3>Joueurs</h3>
        <ul>
            <li *ngFor="let p of game?.players" [class.active]="p === game?.activePlayer" [class.organizer]="p.isOrganizer" [class.abandoned]="p.hasAbandoned">
                {{ p.name }} - Combats gagnés: {{ p.wins }}
            </li>
        </ul>
    </div>-->

    <!-- Zone des messages -->
    <div class="game-messages">
        <h3>Messages</h3>
        <div class="messages-content">(Clavardage et journal de jeu)</div>
    </div>

    <!-- Compte à rebours 
    <div class="countdown">
        @if(Player.isInCombat)
        {
            <p>Temps restant: {{ game?.countdown }}</p>
        }
        @else
        {
            <p>Pas en combat</p>
        }

    </div>-->

    <!-- Boutons d'action 
    <div class="action-buttons">
        <button (click)="endTurn()">Terminer tour</button>
        <button (click)="executeNextAction()">Exécuter action</button>
        <button (click)="backToHome()">Abandonner</button>
    </div>-->

    <!-- Interface de combat 
    <div class="combat-interface" *ngIf="player?.isInCombat">
        <h3>Combat</h3>
        <p>Résultats des dés: {{ game?.combatDiceResults }}</p>
        <p>Tentatives d'évasion restantes: {{ player?.escapeAttempts }}</p>
        <button (click)="attack()" *ngIf="game?.playerTurn === player">Attaquer</button>
        <button (click)="evade()" *ngIf="player?.escapeAttempts > 0">Évasion</button>
    </div>-->
</div>
